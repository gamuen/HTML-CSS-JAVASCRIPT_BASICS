<!DOCTYPE html>
<html lang="ko">

<head>
<meta charset="UTF-8">
<title>9장 복습</title>
<style>
     td { width:50px; height:50px; border:1px solid orchid; }
</style>

<script>
 let tds;
 let prevIndex=0, index=0;
 window.onload = function () { // 웹 페이지의 로딩 완료 시 실행
tds = document.getElementsByTagName("td");
// tds 의 index 는 0 부터 2까지 첫번째 행의 셀들, 3부터 5까지 두 번째 행의 셀들, 
// 6부터 8까지 세 번째 행의 셀들이다.
 tds[index].style.backgroundColor = "orchid";
 }
// 키보드에 onkeydown, 즉 임의의 키보드 키를 눌렀을 때 발생하는 실행 함수이다.
  window.onkeydown = function (e) {
// e.key 는 눌린 키보드 키의 이름이다. 예로 들면, "ArrowDown", "ArrowUp", 
// "ArrowLeft", "ArrowRight" 등이다.
 switch(e.key) {
 case "ArrowDown" : 
if(index/6 >= 5) return; // 맨 아래 셀의 경우, arrowdown 을 눌러도 아무 일도 일어나지 않는다.
// index/3 는 현재 index 가 몇 번째 행에 있는지를 나타낸다.
index += 6;
 break;
 case "ArrowUp" : 
if(index/6 < 1) return; // 맨 위쪽 셀의 경우, arrowup 을 눌러도 아무 일도 일어나지 않는다.
index -= 6;
 break;
 case "ArrowLeft" : 
if(index%6 == 0) return; // 맨 왼쪽 셀의 경우이다. 
index--; 
break;
 case "ArrowRight" : 
if(index%6 == 5) return; // 맨 오른쪽 셀의 경우
index++; 
break;
 }
 // 이제 index 값은 당신이 우른 키보드 키 값에 따라 적절히 바뀌어 있다.
 // 그러한 previndex 값은 아직 0 에서 바뀌지 않았다. 이제 이 이전 셀의 index 값을 이용해서
 // 현재 index 값에 해당하는 셀의 배경색을 orchid 로 바꾸고, 이전 index 값에 해당하는 셀의
 // 배경색을 흰색으로 바꾸는 작업을 한다.
  tds[index].style.backgroundColor = "orchid";
 tds[prevIndex].style.backgroundColor = "white";
 // 이제 역할이 끝난 previndex 를 현재 인덱스 값으로 갱신해 줍니다.
 prevIndex = index;
 }


let width=1; // 테두리 두께
function down(obj) { obj.style.fontStyle= "italic";} function up(obj) {obj.style.fontStyle= "normal";}
function over(obj) { obj.style.borderColor= "violet";} function out(obj) {obj.style.borderColor= "lightgray";}

function calculate() {
 let exp= document.getElementById("exp"); let result = document.getElementById("result");
 //  text form 에서 입력받고, text form 에서 결과 값을 출력하기 위해 2개의 태그 객체를 가져옵니다.
 result.value= window.eval(exp.value); // window.eval() 함수는 exp.value 에 입력된 식을 계산하여 그 결과를 반환한다.
 }

function wheel(e, obj) { // e는 이벤트 객체, obj 는 이벤트를 받는 dom 객체
     if(e.wheelDelta< 0) { // 휠을 아래로 굴릴 때는 e.의 wheelDelta 값이 음수가 됩니다.
          width--; // 폭 1 감소
          if(width < 0) {
               width = 0; } // 폭이 0보다 작아지는지 체크 후, 그렇다면 폭을 0으로 설정합니다.
     } 
     else { // 마우스 휠을 위로 굴릴 때.
          width++; // 폭 1 만큼을 증가시킵니다. 
     }
obj.style.borderStyle= "ridge";
obj.style.borderWidth= width+"px";
}
</script>
</head>

<body>
     <!-- 그동안 onclick, onmouseout/over, onkeydown, onwheel, onmouseup, onmousedown 속성은 
      사용해 봤습니다. 각각은 클릭 시, 마우스를 올렸을 때, 벗어났을 때, 마우스 휠을 굴릴 때,
      누르고 있던 마우스 버튼을 뗄 때, 마우스 버튼을 눌렀을 때를 뜻합니다. 굴렸을 때 특정 함수를 실행해 this 객체의
      width 를 수정하기도 했는데, this 객체가 span 이면 span 태그의 
      obj.style.borderWidth 값이 바뀌게 됩니다.-->
      <!-- 이번에는 onmousemove 속성으로, 해당 태그 객체 위에서 마우스 포인터 위치를 변경할 때를 
       뜻합니다.-->
<img src="20241227224615.png" onmousemove="where(event)"> <div id="div1"></div>

<div>마우스
<!-- span 태그 내의 콘텐츠의 border 특성의 색깔이나 너비를 변경하고 싶다면, 해당 
 인라인 태그를 inline-block 태그로 style 속성 내 display 속성을 통해 바꾼 다음 시도하면 됩니다.-->
<span onmousedown="down(this)" onmouseup="up(this)" onmouseover="over(this)" 
onmouseout="out(this)" onwheel="wheel(event, this)" style="display:inline-block"> 이벤트</span>
</div>

 <form>
식 <input type="text" id="exp" value=""><br>
값 <input type="text" id ="result"> <input type="button" value=" 계산 " onclick="calculate()">
 </form>

<form>
<input type="text" name="s">
<input type="button" value="테스트" id="button"> <hr>
</form>
<div id="div" style="color:green"></div>

 <script>
let div1 = document.getElementById("div1");
function where(e) {
// e.~ 는 onmousemove 이벤트 객체의 속성이다. 해당 이벤트 객체에는, screenX, screenY, clientX, clientY
// x, y 속성이 있는데, x=clientX, y=clientY 다. x 는 동일한 좌표 값을 갖는다.
let text = "";
text += "(screenX, screenY)=" + e.screenX+ "," + e.screenY+ "<br>"; text += "(clientX, clientY)=" + e.clientX+ "," + e.clientY+ "<br>";
text += "(x, y)=" + e.x + "," + e.y + "\n";  
div1.innerHTML= text;
}
let div = document.getElementById("div"); // 이벤트 메시지 출력 공간
let button = document.getElementById("button");
// click, mouseover, mouseout, mousedown, mouseup, mousemove, mousewheel 
// _이벤트 리스너 속성이 있습니다.

document.body.addEventListener("click",capture, true); // 캡쳐 단계의 이벤트객체로, 해당 이벤트리스너 속성은 onmouseclick 이 일어났을 때며, 해당 이벤트객체인 e 가 갖는 type 이 capture 라는 걸 보여준다.
button.addEventListener("click", bubble, false); // 버블 이벤트 객체로, 해당 이벤트리스너 속성은 onmouseclick 이 일어났을 때, 해당 태그 객체의 이름을 let tagname = obj.tagName 을 통해 보여준다.
document.body.addEventListener("click", bubble, false); // obj = e.currentTarget 이다. e = '이벤트 객체'의 속성들 중 유일하게 해당 이벤트 객체를 일으킨 태그 객체에 대한 정보를 보여준다.
// 특이한 점은, 이벤트 객체를 매개변수로 받아서 해당 태그 객체의 정보를 받는 function 은 addEventListener() 메소드에 2번째 매개변수로 넣어질 때는, 평범하게 이벤트리스너 속성으로 들어갈
// 때와 다르게 (event) 표시를 하지 않아도 된다는 점이다.

function capture(e) { // e는 이벤트 객체
let obj= e.currentTarget; // 이것은 현재 이벤트가 발생한 근원 태그 객체다.
let tagName= obj.tagName; // 태그 이름
div.innerHTML+= "<br>capture 단계 : " + tagName+ " 태그 " + e.type+ "이벤트";
 }

function bubble(e) { // e는 이벤트 객체
let obj= e.currentTarget; // 현재 이벤트를 받은  DOM 객체
let tagName= e.currenTarget.tagName; // 해당 이벤트가 발생한 근원 태그의 이름을 호출.
div.innerHTML+= "<br>bubble 단계 : " + tagName+ " 태그 " + e.type+ "이벤트";
 }
 </script>


<table>
 <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
 <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
 <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
 <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
 <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
 <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
 </table>
</body>
</html>